#textdomain wesnoth-anl

#define ANL_SHOW_IF_LEVEL_0 TERRAINLIST
    [show_if]
        [have_unit]
            side=$side_number
            x,y=$x1,$y1
            [filter]
                level=0
                side=$side_number
            [/filter]
            [not]
                [filter_wml]
                    [status]
                        worked_this_turn=yes
                    [/status]
                [/filter_wml]
            [/not]
            [filter_location]
                terrain={TERRAINLIST}
            [/filter_location]
        [/have_unit]
    [/show_if]
#enddef

#define SP_WORKER_OPTIONS
    [set_menu_item]
        id=anl_sp_get_to_work
        description= _ "Get to Work!"
        [show_if]
            [have_unit]
                side=$side_number
                x,y=$x1,$y1
                [filter]
					level=0
					side=$side_number
                [/filter]
            [/have_unit]
        [/show_if]
        [command]
            [store_side]
                side=$side_number
                variable=worker
            [/store_side]

            [store_unit]
                [filter]
                    x=$x1
                    y=$y1
                [/filter]
                variable=unit
            [/store_unit]

            [set_variable]
                name=finished
                value=no
            [/set_variable]
            [while]
                [variable]
                    name=finished
                    equals=no
                [/variable]

                [do]
# wmlindent: start ignoring
            [message]
                speaker=unit
# wmllint: display on
                message= _ "What shall I do, my liege?"
# wmllint: display off

[option]
message= _ "Nothing"
    [command]
        [set_variable]
            name=finished
            value=yes
        [/set_variable]
    [/command]
[/option]

# ----------------------------------------------
# FARMLAND

# Convert to grassland

[option]
#textdomain wesnoth-ANLEra
image = "terrain/grass/green6.png"
message= _ "Convert to Grassland"
#textdomain wesnoth-anl
description =_  "Cost: 0g"
    {ANL_SHOW_IF_LEVEL_0 "Re"}
    [command]
        {COMPLETE_ACTION 0}
        {MODIFY_TERRAIN Gg $x1 $y1}
            [sound]
                name=dagger-swish.wav
            [/sound]
    [/command]
[/option]

# ----------------------------------------------
# GRASSLAND

# Plant Farm

[option]
message= {MENU_IMG_TXT2 "terrain/embellishments/farm-veg-spring-icon.png" ("<span color='green'>" + _ "Plant Farm" + "</span>") ("<span size='small'>" + _ "Cost: 0g" + "</span>")}
    {ANL_SHOW_IF_LEVEL_0 "Gg,Gs"}
    [command]
        {COMPLETE_ACTION 0}
        {MODIFY_TERRAIN Re $x1 $y1}
            [sound]
                name=entangle.wav
            [/sound]
    [/command]
[/option]

# Flood

[option]
message= {MENU_IMG_TXT2 "terrain/water/coast-tile.png" ("<span color='green'>" + _ "Flood the Field" + "</span>") ("<span size='small'>" + _ "Cost: 4g" + "</span>")}
    {ANL_SHOW_IF_LEVEL_0 "Gg,Gs"}
    [command]
        [if]
        [variable]
            name=worker.gold
            greater_than_equal_to=4
        [/variable]

        [then]
            {COMPLETE_ACTION -4}
            {MODIFY_TERRAIN "Ww" $x1 $y1}
            [sound]
                name=water-blast.wav
            [/sound]
        [/then]
        [/if]
    [/command]
[/option]

# Plant Saplings

[option]
message= {MENU_IMG_TXT2 "terrain/forest/pine-tile.png" ("<span color='green'>" + _ "Plant Saplings" + "</span>") ("<span size='small'>" + _ "Cost: 2g" + "</span>")}
    {ANL_SHOW_IF_LEVEL_0 "G"}
    [command]
        [if]
        [variable]
            name=worker.gold
            greater_than_equal_to=2
        [/variable]

        [then]
            {COMPLETE_ACTION -2}
            {MODIFY_TERRAIN_OVERLAY "^Fp" $x1 $y1}
            [sound]
                name=entangle.wav
            [/sound]
        [/then]
        [/if]
    [/command]
[/option]

# ----------------------------------------------
# FOREST

# Chop Down Forest

[option]
message= {MENU_IMG_TXT2 "terrain/grass/green6.png" ("<span color='green'>" + _ "Chop Down Forest" + "</span>") ("<span size='small'>" + _ "Earns: 1g" + "</span>")}
    {ANL_SHOW_IF_LEVEL_0 "*^F*"}
    [command]
            [set_variable]
                name=finished
                value=yes
            [/set_variable]

            [set_variable]
                name=unit.status.worked_this_turn
                value=yes
            [/set_variable]
            [set_variable]
                name=unit.moves
                value=0
            [/set_variable]


            [gold]
                side=$side_number
                amount=1
            [/gold]

            [sound]
                name=dagger-swish.wav
            [/sound]
            [delay]
                time=250
            [/delay]
            [sound]
                name=axe.ogg
            [/sound]
            [delay]
                time=150
            [/delay]
            [sound]
                name=wose-die.ogg
            [/sound]

            {MODIFY_TERRAIN_OVERLAY "" $x1 $y1}

            [unstore_unit]
                variable=unit
                text=1 # wmllint: ignore
                red,green,blue=204,204,51
            [/unstore_unit]
    [/command]
[/option]	

# ----------------------------------------------
# HILLS

# Build Gold Mine

[option]
message= {MENU_IMG_TXT2 "terrain/village/human-hills-tile.png" ("<span color='green'>" + _ "Build Mine" + "</span>") ("<span size='small'>" + _ "Cost: 25g" + "</span>")}
    {ANL_SHOW_IF_LEVEL_0 "H*"}
    [command]
        [if]
        [variable]
            name=worker.gold
            greater_than_equal_to=25
        [/variable]

        [then]
            {COMPLETE_ACTION (-25)}
            {MODIFY_TERRAIN_OVERLAY "^Vhh" $x1 $y1}
            {ANL_CAPTURE_VILLAGE}
            {BUILD_SOUND_1}
        [/then]
        [/if]
    [/command]
[/option]

# ----------------------------------------------
# MOUNTAINS

# Build Gold Mine

[option]
message= {MENU_IMG_TXT2 "terrain/village/human-mountain-tile.png" ("<span color='green'>" + _ "Build Mine" + "</span>") ("<span size='small'>" + _ "Cost: 25g" + "</span>")}
    {ANL_SHOW_IF_LEVEL_0 "M*"}
    [command]
        [if]
        [variable]
            name=worker.gold
            greater_than_equal_to=25
        [/variable]

        [then]
            {COMPLETE_ACTION (-25)}
            {MODIFY_TERRAIN_OVERLAY "^Vhh" $x1 $y1}
            {ANL_CAPTURE_VILLAGE}
            {BUILD_SOUND_1}
        [/then]
        [/if]
    [/command]
[/option]

# ----------------------------------------------
# WATER

# Make a Ford

[option]
message= {MENU_IMG_TXT2 "terrain/water/ford.png" ("<span color='green'>" + _ "Make a Ford" + "</span>") ("<span size='small'>" + _ "Cost: 3g" + "</span>")}
    {ANL_SHOW_IF_LEVEL_0 `"W*,S*"}
    [command]
        [if]
        [variable]
            name=worker.gold
            greater_than_equal_to=3
        [/variable]

        [then]
            {COMPLETE_ACTION (-3)}
            [delay]
                time=200
            [/delay]
            [sound]
                name=dagger-swish.wav
            [/sound]
            {MODIFY_TERRAIN "Wwf" $x1 $y1}
        [/then]
        [/if]
    [/command]
[/option]

# Landfill

[option]
message= {MENU_IMG_TXT2 "terrain/grass/green6.png" ("<span color='green'>" + _ "Landfill" + "</span>") ("<span size='small'>" + _ "Cost: 5g" + "</span>")}
    {ANL_SHOW_IF_LEVEL_0 "W*,S*"}
    [command]
        [if]
        [variable]
            name=worker.gold
            greater_than_equal_to=5
        [/variable]

        [then]
            {COMPLETE_ACTION (-5)}
            [delay]
                time=200
            [/delay]
            [sound]
                name=claws.ogg
            [/sound]
            {MODIFY_TERRAIN "Gg" $x1 $y1}
        [/then]
        [/if]
    [/command]
[/option]

# ----------------------------------------------
# FORD

# Destroy the Ford

[option]
message= {MENU_IMG_TXT2 "terrain/water/coast-tile.png" ("<span color='green'>" + _ "Destroy the Ford" + "</span>") ("<span size='small'>" + _ "Cost: 0g" + "</span>")}
    {ANL_SHOW_IF_LEVEL_0 "Wwf"}
    [command]
            {COMPLETE_ACTION 0}
            [delay]
                time=200
            [/delay]
            {MODIFY_TERRAIN "Ww" $x1 $y1}
            [sound]
                name=pincers.ogg
            [/sound]
            [delay]
                time=200
            [/delay]
            [sound]
                name=water-blast.wav
            [/sound]
    [/command]
[/option]

# Landfill

[option]
message= {MENU_IMG_TXT2 "terrain/grass/green6.png" ("<span color='green'>" + _ "Landfill" + "</span>") ("<span size='small'>" + _ "Cost: 1g" + "</span>")}
    {ANL_SHOW_IF_LEVEL_0 "Wwf"}
    [command]
        [if]
        [variable]
            name=worker.gold
            greater_than_equal_to=1
        [/variable]

        [then]
            {COMPLETE_ACTION (-1)}
            [delay]
                time=200
            [/delay]
            [sound]
                name=claws.ogg
            [/sound]
            {MODIFY_TERRAIN "Gg" $x1 $y1}
        [/then]
        [/if]
    [/command]
[/option]

# ----------------------------------------------
# CAVE

# Break Up Cave

[option]
message= {MENU_IMG_TXT2 "terrain/grass/green6.png" ("<span color='green'>" + _ "Smash Cave Floor" + "</span>") ("<span size='small'>" + _ "Cost: 2g" + "</span>")}
    {ANL_SHOW_IF_LEVEL_0 "Uu,Uu^Ii"}
    [command]
        [if]
        [variable]
            name=worker.gold
            greater_than_equal_to=2
        [/variable]

        [then]
            {COMPLETE_ACTION (-2)}
            [sound]
                name=claws.ogg
            [/sound]
            {MODIFY_TERRAIN "Gg" $x1 $y1}
        [/then]
        [/if]
    [/command]
[/option]

# Convert Cave To Hills

[option]
message= {MENU_IMG_TXT2 "terrain/hills/regular2.png" ("<span color='green'>" + _ "Smash Cave Floor" + "</span>") ("<span size='small'>" + _ "Cost: 3g" + "</span>")}
    {ANL_SHOW_IF_LEVEL_0 "Uh,Uh^Ii"}
    [command]
        [if]
        [variable]
            name=worker.gold
            greater_than_equal_to=3
        [/variable]

        [then]
            {COMPLETE_ACTION (-3)}
            [sound]
                name=claws.ogg
            [/sound]
            {MODIFY_TERRAIN "Hh" $x1 $y1}
        [/then]
        [/if]
    [/command]
[/option]

# Harvest Cave Mushrooms

[option]
message= {MENU_IMG_TXT2 "terrain/cave/floor.png" ("<span color='green'>" + _ "Harvest Mushrooms" + "</span>") ("<span size='small'>" + _ "Earns: 3g" + "</span>")}
    {ANL_SHOW_IF_LEVEL_0 "*^Uf,*^Emf,*^Em"}
    [command]
            [set_variable]
                name=finished
                value=yes
            [/set_variable]

            [set_variable]
                name=unit.status.worked_this_turn
                value=yes
            [/set_variable]
            [set_variable]
                name=unit.moves
                value=0
            [/set_variable]

            [gold]
                side=$side_number
                amount=3
            [/gold]

            [sound]
                name=dagger-swish.wav
            [/sound]
            [delay]
                time=250
            [/delay]
            [sound]
                name=axe.ogg
            [/sound]

            {MODIFY_TERRAIN_OVERLAY "Gg" $x1 $y1}

            [unstore_unit]
                variable=unit
                text=3 # wmllint: ignore
                red,green,blue=204,204,51
            [/unstore_unit]
    [/command]
[/option]

# ----------------------------------------------
# RUBBLE

# Clear Rubble

[option]
message= {MENU_IMG_TXT2 "terrain/grass/green6.png" ("<span color='green'>" + _ "Clear the Ground" + "</span>") ("<span size='small'>" + _ "Cost: 0g" + "</span>")}
    {ANL_SHOW_IF_LEVEL_0 "Rd,*^Efm,*^Esd,*^Es"}
    [command]
            {COMPLETE_ACTION (-0)}
            [delay]
                time=200
            [/delay]
            [sound]
                name=claws.ogg
            [/sound]
            {MODIFY_TERRAIN "Gg" $x1 $y1}
            [remove_item]
                x,y=$x1,$y1
            [/remove_item]
    [/command]
[/option]

#-------------------------------------------------
#Clear Ground
[option]
message= {MENU_IMG_TXT2 "terrain/grass/green6.png" ("<span color='green'>" + _ "Shovel Snow" + "</span>") ("<span size='small'>" + _ "Cost: 1g" + "</span>")}
	{ANL_SHOW_IF_LEVEL_0 "Aa"}
    [command]
        {COMPLETE_ACTION (0)}
        {MODIFY_TERRAIN Gg $x1 $y1}
            [sound]
                name=dagger-swish.wav
            [/sound]
    [/command]
[/option]
#-------------------------------------------
[option]
#textdomain wesnoth-ANLEra
message= {MENU_IMG_TXT2 "terrain/hills/regular.png" ("<span color='green'>" + _ "Shovel Snow" + "</span>") ("<span size='small'>" + _ "Cost: 1g" + "</span>")}
#textdomain wesnoth-anl
	{ANL_SHOW_IF_LEVEL_0 "Ha"}
    [command]
        {COMPLETE_ACTION (0)}
        {MODIFY_TERRAIN Hh $x1 $y1}
            [sound]
                name=dagger-swish.wav
            [/sound]
    [/command]
[/option]
#----------------------------------------
[option]
#textdomain wesnoth-ANLEra
message= {MENU_IMG_TXT2 "terrain/mountains/basic-tile.png" ("<span color='green'>" + _ "Shovel Snow" + "</span>") ("<span size='small'>" + _ "Cost: 1g" + "</span>")}
#textdomain wesnoth-anl
	{ANL_SHOW_IF_LEVEL_0 "Ms"}
    [command]
        {COMPLETE_ACTION (0)}
        {MODIFY_TERRAIN Mm $x1 $y1}
            [sound]
                name=dagger-swish.wav
            [/sound]
    [/command]
[/option]
#---------------------------------------
[option]
#textdomain wesnoth-ANLEra
message= {MENU_IMG_TXT2 "terrain/grass/green6.png" ("<span color='green'>" + _ "Break Up Floor" + "</span>") ("<span size='small'>" + _ "Cost: 1g" + "</span>")}
#textdomain wesnoth-anl
	{ANL_SHOW_IF_LEVEL_0 "U*,Rrp"}
    [command]
        {COMPLETE_ACTION (0)}
        {MODIFY_TERRAIN Gg $x1 $y1}
            [sound]
                name=dagger-swish.wav
            [/sound]
    [/command]
[/option]

#------------------------------------------
[option]
#textdomain wesnoth-ANLEra
message= {MENU_IMG_TXT2 "terrain/water/coast-tile.png" ("<span color='green'>" + _ "Melt Ice" + "</span>") ("<span size='small'>" + _ "Cost: 1g" + "</span>")}
#textdomain wesnoth-anl
	{ANL_SHOW_IF_LEVEL_0 "Ai"}
    [command]
        {COMPLETE_ACTION (0)}
        {MODIFY_TERRAIN Ww $x1 $y1}
            [sound]
                name=dagger-swish.wav
            [/sound]
    [/command]
[/option]
#------------------------------------------
[option]
#textdomain wesnoth-ANLEra
message= {MENU_IMG_TXT2 "terrain/grass/green6.png" ("<span color='green'>" + _ "Plant Grass" + "</span>") ("<span size='small'>" + _ "Cost: 1g" + "</span>")}
#textdomain wesnoth-anl
	{ANL_SHOW_IF_LEVEL_0 "R*,Gll"}
    [command]
        {COMPLETE_ACTION (0)}
        {MODIFY_TERRAIN Gg $x1 $y1}
            [sound]
                name=dagger-swish.wav
            [/sound]
    [/command]
[/option]
#------------------------------------------
[option]
#textdomain wesnoth-ANLEra
message= {MENU_IMG_TXT2 "terrain/grass/green6.png" ("<span color='green'>" + _ "Water Grass" + "</span>") ("<span size='small'>" + _ "Cost: 1g" + "</span>")}
#textdomain wesnoth-anl
	{ANL_SHOW_IF_LEVEL_0 "Gs,Gd"}
    [command]
        {COMPLETE_ACTION (0)}
        {MODIFY_TERRAIN Gg $x1 $y1}
            [sound]
                name=dagger-swish.wav
            [/sound]
    [/command]
[/option]
#------------------------------------------
[option]
#textdomain wesnoth-ANLEra
message= {MENU_IMG_TXT2 "terrain/grass/green6.png" ("<span color='green'>" + _ "Dig Out Sand" + "</span>") ("<span size='small'>" + _ "Cost: 1g" + "</span>")}
#textdomain wesnoth-anl
	{ANL_SHOW_IF_LEVEL_0 "Hd"}
    [command]
        {COMPLETE_ACTION (0)}
        {MODIFY_TERRAIN Hh $x1 $y1}
            [sound]
                name=dagger-swish.wav
            [/sound]
    [/command]
[/option]
[option]
#textdomain wesnoth-ANLEra
message= {MENU_IMG_TXT2 "terrain/grass/green6.png" ("<span color='green'>" + _ "Dig Out Sand" + "</span>") ("<span size='small'>" + _ "Cost: 1g" + "</span>")}
#textdomain wesnoth-anl
	{ANL_SHOW_IF_LEVEL_0 "Dd,Ds,Dd^Do,Dd^Dc"}
    [command]
        {COMPLETE_ACTION (0)}
        {MODIFY_TERRAIN Gg $x1 $y1}
            [sound]
                name=dagger-swish.wav
            [/sound]
    [/command]
[/option]

# Build Village

[option]
message= {MENU_IMG_TXT2 "terrain/village/human-tile.png" ("<span color='green'>" + _ "Build Village" + "</span>") ("<span size='small'>" + _ "Cost: 14g" + "</span>")}
    {ANL_SHOW_IF_LEVEL_0 "G*,Aa,D*"}
    [command]
        [if]
        [variable]
            name=worker.gold
            greater_than_equal_to=14
        [/variable]

        [then]
            {COMPLETE_ACTION (-14)}
            {MODIFY_TERRAIN_OVERLAY "^Vh" $x1 $y1}
            {ANL_CAPTURE_VILLAGE}
            {BUILD_SOUND_1}
        [/then]
        [/if]
    [/command]
[/option]


# ------------------------------------------------
# CASTLES
[option]
message= {MENU_IMG_TXT2 "terrain/castle/castle-tile.png" ("<span color='green'>" + _ "Build Castle" + "</span>") ("<span size='small'>" + _ "Cost: 5g" + "</span>")}
    {ANL_SHOW_IF_LEVEL_0 "G*,Aa,D*"}
    [command]
        [if]
        [variable]
            name=worker.gold
            greater_than_equal_to=5
        [/variable]

        [then]
            {COMPLETE_ACTION (-5)}
            {MODIFY_TERRAIN "Ch" $x1 $y1}
            {BUILD_SOUND_2}
        [/then]
        [/if]
    [/command]
[/option]

# --------------------------------------
# KEEP

[option]
message= {MENU_IMG_TXT2 "terrain/castle/keep-tile.png" ("<span color='green'>" + _ "Build a Keep" + "</span>") ("<span size='small'>" + _ "Cost: 6g" + "</span>")}
    {ANL_SHOW_IF_LEVEL_0 "C*^*"}
    [command]
        [if]
        [variable]
            name=worker.gold
            greater_than_equal_to=6
        [/variable]

        [then]
            {COMPLETE_ACTION (-6)}
            {MODIFY_TERRAIN "Kh" $x1 $y1}
            {BUILD_SOUND_2}
        [/then]
        [/if]
    [/command]
[/option]
[option]
message= {MENU_IMG_TXT2 "terrain/village/coast-tile.png" ("<span color='blue'>" + _ "Build Village" + "</span>") ("<span size='small'>" + _ "Cost: 14g" + "</span>")}
	{ANL_SHOW_IF_LEVEL_0 "W*"}
    [command]
       [if]
    	[variable]
            name=worker.gold
            greater_than_equal_to=14
        [/variable]
        
        [then] 
        {COMPLETE_ACTION (-14)}
        {MODIFY_TERRAIN_OVERLAY "^Vm" $x1 $y1}
            [sound]
                name=dagger-swish.wav
            [/sound]
            {ANL_CAPTURE_VILLAGE}
        [/then]
        [/if]
    [/command]
[/option]
# ------------------------------------------------
# CASTLES
[option]
message= {MENU_IMG_TXT2 "terrain/castle/castle-tile.png" ("<span color='green'>" + _ "Build Castle" + "</span>") ("<span size='small'>" + _ "Cost: 5g" + "</span>")}
    {ANL_SHOW_IF_LEVEL_0 "W*^*"}
    [command]
        [if]
        [variable]
            name=worker.gold
            greater_than_equal_to=5
        [/variable]

        [then]
            {COMPLETE_ACTION (-5)}
            {MODIFY_TERRAIN "Chw" $x1 $y1}
            {BUILD_SOUND_2}
        [/then]
        [/if]
    [/command]
[/option]

# --------------------------------------
# KEEP

[option]
message= {MENU_IMG_TXT2 "terrain/castle/keep-tile.png" ("<span color='green'>" + _ "Build a Keep" + "</span>") ("<span size='small'>" + _ "Cost: 6g" + "</span>")}
    {ANL_SHOW_IF_LEVEL_0 "C*^*"}
    [command]
        [if]
        [variable]
            name=worker.gold
            greater_than_equal_to=6
        [/variable]

        [then]
            {COMPLETE_ACTION (-6)}
            {MODIFY_TERRAIN "Khw" $x1 $y1}
            {BUILD_SOUND_2}
        [/then]
        [/if]
    [/command]
[/option]




[/message]
[/do]
[/while]

[/command]
[/set_menu_item]
#enddef
# wmlindent: stop ignoring
